
# Lecture 11


## 1. Workload Distribution Architecture
- IT 리소스는 하나 이상의 동일한 IT 리소스와 사용 가능한 IT 리소스 간에 워크로드를 균등하게 분배해 주는 로드 밸런서를 추가함을 통해 수평적으로 확장될 수 있다.
- 결과적으로 워크로드 분산 아키텍처는 로드 밸런싱 알고리즘 및 런타임 로직의 정교함에 따라 IT 리소스의 과도 활용와 적은 활용을 모두 감소시킨다.
- Figure 11.1 : 클라우드 서비스 A의 중복 복사본이 가상 서버 B에 구현된다. 로드 밸런서는 클라우드 서비스 소비자 요청을 가로채 가상 서버 A와 B 둘 다로 전달하여 워크로드 분산이 균등하도록 보장한다.

### 1.1. additional mechanisms
- Audit Monitor : 런타임 워크로드를 배포할 때 데이터를 처리하는 IT 리소스의 유형과 지리적 위치에 따라 모니터링이 법률 및 규제 요건을 충족하는지 여부를 결정할 수 있다.
- Cloud Usage Monitor : 런타임 작업 추적 및 데이터 처리를 수행하기 위해 다양한 모니터를 사용할 수 있다.
- Hypervisor : 하이퍼바이저와 하이퍼바이저가 호스팅하는 가상 서버 간의 워크로드에 분배가 필요하다.
- Logical Network Perimeter : 논리적 네트워크 경계는 워크로드 분산 방식과 위치에 따른 클라우드 소비자 네트워크 경계를 격리한다.
- Resource Cluster : 액티브/액티브 모드의 클러스터 IT 리소스는 일반적으로 서로 다른 클러스터 노드 간의 워크로드 밸런싱을 지원하는 데 사용된다.
- Resource Replication : 이러한 메커니즘은 런타임 워크로드 배포 요구에 대응하여 가상화된 IT 리소스의 새로운 인스턴스를 생성할 수 있다.


## 2. Resource Pooling Architecture
: 동일한 IT 리소스가 자동으로 동기화된 상태로 유지되도록 보장하는 시스템으로 그룹화되고 유지되는 하나 이상의 리소스 풀의 사용에 기초한다.
// Data consistency, synchronization이 힘들다

### 2.1. common examples of resource pools
- Physical server pools : 운영 체제 및 기타 필요한 프로그램 및/또는 애플리케이션과 함께 설치되었으며 즉시 사용할 수 있는 네트워크 서버로 구성된다.
- Virtual server pools : 일반적으로 프로비저닝 중에 클라우드 소비자가 선택한 여러 사용 가능한 템플릿 중 하나를 사용하여 구성된다.
- Storage pools, or cloud storage device pools : 비어 있거나 채워진 클라우드 저장 장치를 포함하는 파일 기반 또는 블록 기반 저장소 구조로 구성된다.
- Network pools (or interconnect pools) : 서로 다른 사전 구성된 네트워크 연결 장치로 구성된다.
- CPU pools : 가상 서버에 할당될 준비가 되어 있으며 일반적으로 개별 처리 코어로 구분된다.
- Physical RAM pools : 새로 프로비저닝된 물리적 서버에 사용하거나 수직적으로 물리적 서버를 확장하기 위해 사용될 수 있다.

리소스 풀은 특정 클라우드 소비자 또는 애플리케이션을 위한 여러 풀로 매우 복잡해질 수 있다.

### 2.2. additional mechanisms
- Audit Monitor: 이 메커니즘은 리소스 풀 사용을 모니터링하여 특히 풀에 클라우드 저장 장치나 메모리에 로드된 데이터가 포함된 경우 개인 정보 보호 및 규정 요구 사항을 준수하는지 확인하십시오.
- Cloud Usage Monitor : 풀링된 IT 리소스와 모든 기본 관리 시스템에 필요한 런타임 추적 및 동기화에는 다양한 클라우드 사용 모니터가 사용된다.
- Hypervisor: 하이퍼바이저 메커니즘은 가상 서버를 호스팅할 뿐만 아니라 리소스 풀에 대한 액세스 권한도 가상 서버에 제공하는 역할을 한다.
- Logical Network Perimeter: 논리적 네트워크 경계는 리소스 풀을 논리적으로 구성하고 격리하는 데 사용된다.
- Pay-Per-Use Monitor : Pay-per-Use 모니터는 개별 클라우드 소비자가 할당되는 방법에 대한 사용량 및 청구 정보를 수집하고 다양한 풀의 IT 리소스를 사용한다.
- Remote Administration System : 일반적으로 이 메커니즘은 프런트엔드 포털을 통해 리소스 풀 관리 기능을 제공하기 위해 백엔드 시스템 및 프로그램과 연계하는데 사용된다.
- Resource Management System : 자원 관리 시스템 메커니즘은 클라우드 소비자에게 자원 풀 관리를 위한 도구 및 권한 관리 옵션을 제공한다.
- Resource Replication : 자원 풀용 IT 리소스의 새로운 인스턴스를 생성하는 데 사용되는 메커니즘.

Figure 11.3 : 풀 B와 C는 클라우드 소비자에게 할당된 더 큰 풀 A에서 가져온 형제 풀이다. 이는 풀 B 및 풀 C에 대한 IT 리소스를 클라우드 전체에서 공유되는 일반 IT 리소스 예약에서 얻는 대안이다.

Figure 11.4 : 중첩된 풀 A.1과 풀 A.2는 풀 A와 동일한 IT 리소스로 구성되지만 양은 다르다. 중첩된 풀은 일반적으로 동일한 구성 설정을 가진 동일한 유형의 IT 리소스를 사용하여 신속하게 인스턴스화할 필요가 있는 클라우드 서비스를 프로비저닝하는 데 사용된다.


## 3. Dynamic Scalability Architecture
: 리소스 풀에서 IT 리소스의 동적 할당을 시작하는 미리 정의된 확장 조건의 시스템을 기반으로 하는 아키텍처 모델이다.
- 불필요한 IT 리소스는 수동 개입 없이 효율적으로 회수되므로 동적 할당은 사용 수요 변동에 따른 가변적 활용을 가능하게 한다.
- automated scaling listener는 워크로드 처리에 새로운 IT 리소스를 추가해야 하는 시기를 지정하는 워크로드 threshold로 구성되어 있다.

### 3.1. dynamic scaling 타입
- Dynamic Horizontal Scaling : IT 리소스 인스턴스를 확장하여 변동하는 워크로드를 처리한다. automated scaling listener는 요청을 모니터링하고 리소스 복제를 신호하여 요구 사항 및 권한에 따라 IT 리소스 복제를 시작한다.
- Dynamic Vertical Scaling : 단일 IT 리소스의 처리 용량을 조정해야 하는 경우 IT 리소스 인스턴스의 크기를 늘리거나 줄인다. 예를 들어, 오버로드되는 가상 서버의 메모리는 동적으로 증가하거나 처리 코어를 추가할 수 있다.
- Dynamic Relocation : IT 리소스는 더 많은 용량을 가진 호스트로 재배치된다. 예를 들어, 데이터베이스를 초당 4GB IO용량을 가진 tape-based SAN 저장 장치에서 초당 8GB IO용량을 가진 disk-based SAN 저장 장치로의 이동이 필요할 수도 있다.

Figure 11.5 : (1) 클라우드 서비스 소비자가 클라우드 서비스에 요청을 보내고 있다. (2) 자동화된 스케일링 수신기는 클라우드 서비스를 모니터링하여 사전 정의된 용량 임계값을 초과하는지 여부를 판단한다.

Figure 11.6 : (3) 클라우드 서비스 소비자의 요청 건수가 증가한다. (4) 작업부하는 성능기준을 초과한다. 자동 스케일링 청취자는 미리 정의된 스케일링 정책에 따라 다음 작업 과정을 결정한다. (5) 클라우드 서비스 구현이 추가 확장에 적합한 것으로 판단되는 경우, 자동화된 스케일링 수신기는 스케일링 프로세스를 시작한다.

Figure 11.7 : (6) 자동화된 스케일링 수신기는 클라우드 서비스의 인스턴스를 더 많이 생성하는 자원 복제 메커니즘(7)으로 신호를 보낸다. (8) 워크로드 증가를 수용한 후, 자동 확장 수신기는 필요에 따라 IT 리소스의 모니터링 및 분해를 재개한다.

### 3.2. additional mechanisms
- Cloud Usage Monitor : 전문화된 클라우드 사용 모니터는 이 아키텍처로 인한 동적 변동에 대응하여 런타임 사용을 추적할 수 있다.
- Hypervisor : 하이퍼바이저는 동적 확장성 시스템에 의해 호출되어 가상 서버 인스턴스를 생성하거나 제거하거나 확장된다.
- Pay-Per-Use Monitor : 사용량별 결제 모니터는 IT 리소스의 확장에 대응하여 사용 비용 정보를 수집하기 위해 사용된다.


## 4. Elastic Resource Capacity Architecture
: 호스팅된 IT 리소스의 변동하는 처리 요구사항에 즉시 CPU와 RAM을 할당하고 회수하는 시스템을 사용하는 가상 서버의 동적 프로비저닝과 주로 관련이 있다.

Figure 11.8 : (1) 클라우드 서비스 소비자는 클라우드 서비스에 적극적으로 요청을 보내고 있으며, (2) 자동화된 스케일링 수신기에 의해 모니터링된다. (3) 지능형 자동화 엔진 스크립트는 할당 요청을 사용해 자원 풀에게 알릴 수 있는 워크플로 로직(4)과 함께 배치된다.

Figure 11.9 : (5) 클라우드 서비스 소비자 요청이 증가하여 (6) 자동화된 스케일링 청취자가 지능형 자동화 엔진으로 스크립트 실행을 신호한다. (7) 스크립트는 하이퍼바이저가 리소스 풀에서 더 많은 IT 리소스를 할당하도록 알리는 워크플로우 로직을 실행한다. (8) 하이퍼바이저가 추가 CPU 및 RAM을 가상 서버에 할당하여 처리되는 워크로드가 증가함.

### 4.1. Intelligent Automation Engine
: 워크플로우 논리가 포함된 스크립트를 실행하여 관리 작업을 자동화한다.

### 4.2. additional mechanisms
Cloud Usage Monitor, Pay-Per-Use Monitor, Resource Replication


## 5. Service Load Balancing Architecture
- 서비스 로드 밸런싱 아키텍처는 클라우드 서비스 구현을 확장하기 위해 특별히 설계된 워크로드 분산 아키텍처의 전문화된 변형으로 간주될 수 있다.
- 워크로드를 동적으로 분산하기 위해 로드 밸런싱 시스템을 추가하여 클라우드 서비스의 중복 구축이 생성됨
- 호스트 서버 환경의 예상 워크로드와 처리 용량에 따라, 각 클라우드 서비스 구현의 여러 인스턴스가 변동하는 요청 볼륨에 보다 효율적으로 대응하는 리소스 풀의 일부로 생성될 수 있다.

### 5.1. additional mechanisms
- load balancer
- Cloud Usage Monitor : 클라우드 사용 모니터는 클라우드 서비스 인스턴스 및 각각의 IT 리소스 사용 수준 모니터링 및 다양한 런타임 모니터링 및 사용 데이터 수집 작업에 참여할 수 있다.
- Resource Cluster : 액티브-액티브 클러스터 그룹은 이 아키텍처에 통합되어 클러스터의 서로 다른 멤버 간에 워크로드의 균형을 맞춘다.
- Resource Replication : 리소스 복제 메커니즘은 로드 밸런싱 요구 사항을 지원하는 클라우드 서비스 구현을 생성하는 데 활용된다.

Figure 11.10 : (1) load balancer는 클라우드 서비스 소비자가 전송한 메시지를 가로챔. (2) 가상 서버로 메시지를 전달함으로써 워크로드 처리가 horizontally scale 될 수 있다.

Figure 11.11 : (1) 클라우드 서비스 소비자의 요청이 가상 서버 A에 있는 클라우드 서비스 A로 보내진다. (2) 클라우드 서비스는 클라우스 서비스 A가 구현 되어 있는 가상 서버 B와 C에 요청을 분배할 수 있는 load balancing logic를 클라우드 서비스 구현은 가지고 있다.

// 둘의 차이는 로드 밸런싱을 하는 역할을 하는 것이 누구냐의 차이


## 6. Cloud Bursting Architecture
: 사전 정의된 용량 임계값에 도달할 때마다 사내 IT 리소스에서 클라우드로 확장 또는 "bursts out"하는 동적 확장 형태를 설정한다. 해당 클라우드 기반 IT 리소스는 이중으로 구축되지만 클라우드가 폭발할 때까지 비활성 상태로 유지된다. 더 이상 필요하지 않은 클라우드 기반 IT 리소스가 출시되고 아키텍처가 다시 사내 환경으로 "bursts in"된다.
- Cloud bursting는 클라우드 기반 IT 리소스를 더 높은 사용 요구사항을 충족하기 위해 사용할 수 있는 옵션을 클라우드 소비자에게 제공하는 유연한 확장 아키텍처다. 이 아키텍처 모델의 기초는 automated scaling listener 및 resource replication mechanisms을 기반으로 한다.
- automated scaling listener는 요청을 클라우드 기반 IT 리소스로 리디렉션할 시기를 결정하며, 리소스 복제는 상태 정보와 관련하여 사내 IT 리소스와 클라우드 기반 IT 리소스 간의 동기화를 유지하기 위해 사용된다.
- automated scaling listener 및 resource replication 외에도, 주로 스케일링되는 IT 리소스 유형에 따라 이 아키텍처의 입출력 역학을 자동화하기 위해 수많은 다른 메커니즘을 사용할 수 있다.

Figure 11.12 : (1) 자동화된 스케일링 청취자는 사내 서비스 A의 사용을 모니터링하고, 서비스 A의 사용 임계값이 초과되면 서비스 소비자 C의 요청을 클라우드(Cloud Service A)의 중복 구현으로 리디렉션한다. (2) 자원 복제 시스템을 사용하여 상태 관리 데이터베이스를 동기화한다.


## 6.1. Elastic Disk Provisioning Architecture
: 클라우드 소비자가 실제로 사용하는 정확한 스토리지 양에 대해 세밀하게 비용을 청구하도록 하는 동적 스토리지 프로비저닝 시스템을 구축한다. 이 시스템은 스토리지 공간의 동적 할당을 위해 thin-provisioning 기술을 사용하며, 청구 목적으로 정확한 사용 데이터를 수집하기 위해 런타임 사용 모니터링에 의해 추가로 지원됨

### 6.2. additional mechanisms
- cloud storage device, virtual server, hypervisor, and pay-per-use monitor
- Cloud Usage Monitor : 전문화된 클라우드 사용 모니터는 스토리지 사용 변동을 추적하고 기록하는 데 사용될 수 있다.
- Resource Replication : 동적 thin-disk 스토리지를 정적 thick-disk 스토리지로 변환해야 하는 경우 리소스 복제는 탄력적인 Disk 프로비저닝 시스템의 일부이다.

Figure 11.13 : (1) 클라우드 소비자는 각각 용량이 150GB인 3개의 하드 디스크가 있는 가상 서버를 요청한다. (2) 가상 서버는 총 450GB의 디스크 공간을 가진 탄력적인 디스크 프로비저닝 아키텍처에 따라 프로비저닝된다. (3) 450GB는 클라우드 제공자에 의해 가상 서버에 할당된다. (4) 클라우드 소비자는 아직 소프트웨어를 설치하지 않았으며, 이는 실제 사용된 공간이 현재 0GB라는 것을 의미한다. (5) 450GB가 이미 클라우드 소비자를 위해 할당 및 예약되어 있기 때문에 할당 시점 현재 450GB의 디스크 사용량에 대해 요금을 부과한다.

Figure 11.14 : (1) 클라우드 소비자는 각각 용량이 150GB인 3개의 하드 디스크가 있는 가상 서버를 요청한다. (2) 가상 서버는 총 450GB의 디스크 공간을 가진 이 아키텍처에 의해 프로비저닝된다. (3) 450GB는 아직 예약되거나 할당되지 않은 물리적 디스크 공간이지만, 이 가상 서버에 허용되는 최대 디스크 사용량으로 설정된다. (4) 클라우드 소비자는 소프트웨어를 설치하지 않았으며, 이는 실제 사용된 공간이 현재 0GB라는 것을 의미한다. (5) 할당된 디스크 공간이 실제 사용된 공간(현재 0)과 동일하기 때문에 클라우드 소비자는 디스크 공간 사용에 대해 요금을 부과받지 않는다.

Figure 11.15 : (1) 클라우드 소비자로부터 요청을 수신하고, 새로운 가상 서버 인스턴스의 프로비저닝이 시작된다. (2) 프로비저닝 프로세스의 일부로 하드 디스크를 동적 또는 씬 프로비저닝 디스크로 선택한다. (3) 하이퍼바이저는 동적 디스크 할당 구성 요소를 호출하여 가상 서버의 씬 디스크를 생성한다. (4) 가상 서버 디스크는 씬 프로비저닝 프로그램을 통해 생성되며 크기가 0에 가까운 폴더에 저장된다. 이 폴더와 폴더의 파일은 운영 중인 애플리케이션을 설치하고 추가 파일을 가상 서버에 복사함에 따라 크기가 커진다. (5) 사용량별 결제 모니터는 실제 동적으로 할당되는 스토리지를 과금 목적으로 추적한다.


## 7. Redundant Storage Architecture
클라우드 스토리지 장치는 네트워크 연결 문제, 컨트롤러 또는 일반적인 하드웨어 장애 또는 보안 위반으로 인해 발생하는 장애 및 운영 중단의 영향을 받는 경우가 있다. 손상된 클라우드 스토리지 장치의 안정성은 파급 효과가 있을 수 있으며, 가용성에 의존하는 클라우드의 모든 서비스, 애플리케이션 및 인프라 구성 요소에 영향을 미칠 수 있다.

// failover 방지

logical unit number (LUN) : 물리적 드라이브의 파티션을 나타내는 논리 드라이브.

Storage Service Gateway : 스토리지 서비스 게이트웨이는 클라우드 스토리지 서비스에 대한 외부 인터페이스 역할을 하는 구성 요소로, 요청된 데이터의 위치가 변경될 때마다 클라우드 소비자 요청을 자동으로 리디렉션할 수 있다.

Storage Replication : 스토리지 복제는 기본 스토리지 장치에서 보조 스토리지 장치로 데이터를 동기식으로 또는 비동기적으로 복제하는 데 사용되는 리소스 복제 메커니즘의 변형이다. 부분 LUN과 전체 LUN을 복제하는 데 사용할 수 있다.

- 중복 스토리지 아키텍처는 데이터를 기본 클라우드 스토리지 장치의 데이터와 동기화하는 failover 시스템의 일부로 2차 중복 클라우드 스토리지 장치를 도입한다. 스토리지 서비스 게이트웨이는 기본 장치가 실패할 때마다 클라우드 소비자 요청을 보조 장치로 전환한다.

Figure 11.16 : (1) 주 클라우드 스토리지 디바이스는 정기적으로 2차 클라우드 스토리지 디바이스로 복제된다.

Figure 11.17 : (2) 주 스토리지를 사용할 수 없게 되고, 스토리지 서비스 게이트웨이가 클라우드 소비자 요청을 보조 스토리지 디바이스에 전달한다. (3) 보조 스토리지 장치는 요청을 LUN에 전달하여 클라우드 소비자가 자신의 데이터에 계속 액세스할 수 있도록 한다.

- 이 클라우드 아키텍처는 일차 클라우드 스토리지 장치가 중복되는 2차 클라우드 스토리지 장치와 동기화되도록 하는 스토리지 복제 시스템에 주로 의존한다.

Figure 11.18 : 스토리지 복제는 중복 스토리지 장치를 주 스토리지 장치와 동기화하는 데 사용된다.

- 클라우드 공급업체는 일반적으로 경제적인 이유로 주 클라우드 스토리지 장치와 다른 지역에 보조 클라우드 스토리지 장치를 배치할 수 있다. 그러나 이는 일부 유형의 데이터에 대해 법적 우려를 제기할 수 있다. 일부 복제 전송 프로토콜에는 거리 제한이 있으므로 보조 클라우드 저장 장치의 위치는 동기화에 사용되는 프로토콜과 방법을 제한할 수 있다.
- 일부 클라우드 공급업체는 이중 어레이 및 스토리지 컨트롤러를 갖춘 스토리지 장치를 사용하여 장치 이중화를 개선하고 클라우드 밸런싱 및 재해 복구 목적으로 보조 스토리지 장치를 다른 물리적 위치에 배치한다. 이 경우 클라우드 제공자는 두 장치 간의 복제를 설정하기 위해 타사 클라우드 제공자를 통해 네트워크 연결을 임대해야 할 수 있다.


audit : 회계, 감사    
Perimeter : 경계    
granularly : 알갱이로